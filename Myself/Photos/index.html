<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matthew Taylor | Self-Captured Photo Gallery</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Welcome to My Self-Captured Photo Gallery</h1>
    </header>
    <main>
        <section class="gallery">
            <?php
                // Base directory where the images are stored
                $baseDir = 'images/';

                // Function to list images recursively from subfolders
                function listImages($dir) {
                    $images = [];
                    $supportedExtensions = ['jpg', 'jpeg', 'png', 'gif']; // Supported image file extensions
                    
                    // Open the directory and iterate over files
                    if ($handle = opendir($dir)) {
                        while (false !== ($entry = readdir($handle))) {
                            // Skip the current and parent directory links
                            if ($entry != "." && $entry != "..") {
                                $path = $dir . '/' . $entry;
                                
                                // Recursively handle directories
                                if (is_dir($path)) {
                                    $images = array_merge($images, listImages($path));
                                } else {
                                    // Validate the file extension
                                    $extension = pathinfo($entry, PATHINFO_EXTENSION);
                                    if (in_array(strtolower($extension), $supportedExtensions)) {
                                        $images[] = $path;
                                    }
                                }
                            }
                        }
                        closedir($handle);
                    }
                    return $images;
                }

                // Get all images from the base directory
                $allImages = listImages($baseDir);

                // Display each image dynamically
                foreach ($allImages as $image) {
                    echo "<img src='$image' alt='" . basename($image) . "'>";
                }
            ?>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 My Self-Captured Photo Gallery</p>
    </footer>
</body>
</html>
